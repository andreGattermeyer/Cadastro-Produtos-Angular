<div class="container">
  <h2>Registrar Nova Venda</h2>

  <form (ngSubmit)="onSubmit()">
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Vendedor</mat-label>
      <mat-select [(ngModel)]="venda.vendedor.id" name="vendedor" required>
        <mat-option *ngFor="let vendedor of vendedores" [value]="vendedor.id">
          {{vendedor.nome}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Produto</mat-label>
      <mat-select [(ngModel)]="venda.produto.id" name="produto" required (selectionChange)="atualizarPreco()">
        <mat-option *ngFor="let produto of produtos" [value]="produto.id">
          {{produto.nome}} - R$ {{produto.preco}} (Estoque: {{produto.quantidade}})
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Quantidade</mat-label>
      <input matInput type="number" [(ngModel)]="venda.quantidade" name="quantidade" min="1" required>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Pre√ßo de Venda</mat-label>
      <input matInput type="number" [(ngModel)]="venda.precoVendido" name="precoVendido" required>
    </mat-form-field>

    <div class="button-row">
      <button mat-raised-button color="primary" type="submit">
        Registrar Venda
      </button>
      <button mat-raised-button type="button" (click)="limparFormulario()">Limpar</button>
      <button mat-raised-button color="warn" type="button" routerLink="/vendas">Cancelar</button>
    </div>
  </form>
</div>
